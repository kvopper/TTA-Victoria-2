# Remove this line to have the validator check for strings in localisation
# Audax Validator "!" Ignore_1004

# Isengard Events: {
# 50100 - 50199 }

# Ringmaking {
# Invitation to the Greatest Smiths
country_event = {
	id = 50100
	title = "Invitation to the Greatest Smiths"
	desc = "EVTDESC50100"
	picture = "isengard/ringmaking"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
	}
	
	mean_time_to_happen = {
		months = 3
	}
	
	option = {
		name = "We shall see what they can do"
		
		random_owned = {
			limit = { owner = { ai = no } }
			owner = { treasury = -50000 }
		}
		
		set_country_flag = ISE_smiths_invited
	}
}

# Crafting Failures
country_event = {
	id = 50101
	title = "Crafting Failures"
	desc = "EVTDESC50101"
	picture = "isengard/ringmaking"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
		has_country_flag = ISE_smiths_invited
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	option = {
		name = "Of course it couldn't be that easy"
		
		random_owned = {
			limit = { owner = { ai = no } }
			owner = { treasury = -100000 }
		}
		
		set_country_flag = ISE_smiths_failed
	}
}

# The Knowledge of the Archives of Orthanc
country_event = {
	id = 50102
	title = "The Knowledge of the Archives of Orthanc"
	desc = "EVTDESC50102"
	picture = "isengard/researching"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
		has_country_flag = ISE_smiths_failed
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	option = {
		name = "We have some knowledge now, but it's not enough. We need to access other archives"
		
		set_country_flag = ISE_researched_orthanc_archives
	}
}

# Dispatch Parties to the Ruins of Ost-en-Edhil
country_event = {
	id = 50103
	title = "Dispatch Parties to the Ruins of Ost-en-Edhil"
	desc = "EVTDESC50103"
	picture = "isengard/search_party"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
		has_country_flag = ISE_smiths_failed
	}
	
	mean_time_to_happen = {
		months = 3
	}
	
	option = {
		name = "Perhaps some hidden knowledge survived the sacking in the Second Age"
		
		random_owned = {
			limit = { owner = { ai = no } }
			owner = { treasury = -50000 }
		}
		
		set_country_flag = ISE_dispatched_search_parties_to_ost_en_edhil
	}
}

# Barrow of the Forgotten King
country_event = {
	id = 50104
	title = "Barrow of the Forgotten King"
	desc = "EVTDESC50104"
	picture = "isengard/search_party"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
		has_country_flag = ISE_dispatched_search_parties_to_ost_en_edhil
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = "At least the effort wasn't fruitless"
		add_country_modifier = { name = ISE_barrow_forgotten_king_spoils duration = -1 }
	}
}

# The Travels of Saruman
country_event = {
	id = 50105
	title = "The Travels of Saruman"
	desc = "EVTDESC50105"
	picture = "isengard/researching"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
		has_country_flag = ISE_researched_orthanc_archives
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = "The creation is near"
		
		random_owned = {
			limit = { owner = { ai = no } }
			owner = { treasury = -100000 }
		}
		
		set_country_flag = ISE_saruman_travelling_for_ringmaking_knowledge
	}
}

# The Ring of Saruman
country_event = {
	id = 50106
	title = "The Ring of Saruman"
	desc = "EVTDESC50106"
	picture = "isengard/ring"
	
	fire_only_once = yes
	
	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		has_country_modifier = ISE_delving_into_ringmaking
		has_country_flag = ISE_saruman_travelling_for_ringmaking_knowledge
	}
	
	mean_time_to_happen = {
		months = 24
	}
	
	option = {
		name = "Now there is one to rival the One"
		
		random_owned = {
			limit = { owner = { ai = no } }
			owner = { treasury = -100000 }
		}
		
		remove_country_modifier = ISE_delving_into_ringmaking
		add_country_modifier = { name = ISE_ring_of_saruman duration = -1 }
	}
}
# }

# Stoors of Maur Tulhau Handling {
# Decide the policy against the Stoors
country_event = {
	id = 50107
	title = "The Fate of the §YStoors of Maur Tulhau§!"
	desc = "EVTDESC50107"
	picture = "isengard/maur_tulhau"
	
	is_triggered_only = yes
	
	option = {
		name = "They are not worth our time"
		
		badboy = -5
		
		ai_chance = { factor = 25 }
	}
	
	option = {
		name = "Send a request to create an alliance"
		
		badboy = -2
		
		set_global_flag = hidden_effects
		set_global_flag = ISE_sphere_MAU
		
		random_country = {
			limit = {
				tag = MAU
				has_global_flag = hidden_effects
			}
			country_event = 50108
		}
		
		clr_global_flag = hidden_effects
		ISE_stoor_policy_sphere_loc = { }
		
		ai_chance = { factor = 25 }
	}
	
	option = {
		name = "Demand that they become a vassal state"
		
		badboy = 2
		
		set_global_flag = hidden_effects
		set_global_flag = ISE_puppet_MAU
		
		random_country = {
			limit = {
				tag = MAU
				has_global_flag = hidden_effects
			}
			country_event = 50108
		}
		
		clr_global_flag = hidden_effects
		ISE_stoor_policy_puppet_loc = { }
		
		ai_chance = { factor = 25 }
	}
	
	option = {
		name = "All land in Enedwaith belongs to $COUNTRY$. Send a demand to transfer titleship of their land"
		
		badboy = 5
		
		set_global_flag = hidden_effects
		set_global_flag = ISE_annex_MAU
		
		random_country = {
			limit = {
				tag = MAU
				has_global_flag = hidden_effects
			}
			country_event = 50108
		}
		
		clr_global_flag = hidden_effects
		ISE_stoor_policy_annex_loc = { }
		
		ai_chance = { factor = 25 }
	}
}

# Stoor Response
country_event = {
	id = 50108
	title = "The $FROMCOUNTRY$ Ultimatum"
	desc = "EVTDESC50108"
	picture = "isengard/maur_tulhau"
	
	is_triggered_only = yes
	
	option = {
		name = "We have no choice"
		
		FROM = { country_event = 50109 }
		
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				has_global_flag = railroading_enabled
			}
		}
	}
	
	option = {
		name = "Never!"
		
		set_global_flag = ISE_MAU_refuse
		FROM = { country_event = 50109 }
		
		ai_chance = { factor = 50 }
	}
}

# Letting ISE know the response
country_event = {
	id = 50109
	title = "The Response of $FROMCOUNTRY$"
	desc = "EVTDESC50109"
	picture = "isengard/maur_tulhau"
	
	is_triggered_only = yes
	
	option = {
		name = "Our path is now set"
		
		random_owned = {
			limit = {
				owner = {
					has_global_flag = ISE_sphere_MAU
					NOT = { has_global_flag = ISE_MAU_refuse }
				}
			}
			owner = {
				relation = {
					who = FROM
					value = 400
				}
				create_alliance = FROM
				diplomatic_influence = {
					who = FROM
					value = 400
				}
			}
		}
		
		random_owned = {
			limit = {
				owner = {
					has_global_flag = ISE_sphere_MAU
					has_global_flag = ISE_MAU_refuse
				}
			}
			owner = {
				relation = {
					who = FROM
					value = -50
				}
				casus_belli = {
					target = FROM
					type = add_to_sphere
					months = 24
				}
			}
		}
		
		random_owned = {
			limit = {
				owner = {
					has_global_flag = ISE_puppet_MAU
					NOT = { has_global_flag = ISE_MAU_refuse }
				}
			}
			owner = {
				relation = {
					who = FROM
					value = 400
				}
				create_alliance = FROM
				diplomatic_influence = {
					who = FROM
					value = 400
				}
				create_vassal = FROM
				FROM = { government = dominion_2 }
			}
		}
		
		random_owned = {
			limit = {
				owner = {
					has_global_flag = ISE_puppet_MAU
					has_global_flag = ISE_MAU_refuse
				}
			}
			owner = {
				relation = {
					who = FROM
					value = -50
				}
				casus_belli = {
					target = FROM
					type = make_puppet
					months = 24
				}
			}
		}
		
		random_owned = {
			limit = {
				owner = {
					has_global_flag = ISE_annex_MAU
					NOT = { has_global_flag = ISE_MAU_refuse }
				}
			}
			owner = {
				inherit = FROM
				MAU = { all_core = { any_pop = { ideology = { factor = 0.05 value = lords_of_isengard } } } }
			}
		}
		
		random_owned = {
			limit = {
				owner = {
					has_global_flag = ISE_annex_MAU
					has_global_flag = ISE_MAU_refuse
				}
			}
			owner = {
				relation = {
					who = FROM
					value = -50
				}
				# Adding all 3 variants to account for the size of the tag
				casus_belli = {
					target = FROM
					type = conquest_tiny
					months = 24
				}
				casus_belli = {
					target = FROM
					type = conquest_small
					months = 24
				}
				casus_belli = {
					target = FROM
					type = conquest
					months = 24
				}
			}
		}
	}
}
# }

# Alliance with Dunlending/Enedwaithrim Tribe
country_event = {
	id = 50110
	title = "An alliance with the White Wizard?"
	desc = "EVTDESC50110"
	picture = lord_of_isengard
	
	is_triggered_only = yes

	option = {
		name = "Acceptable"
		prestige = -5
		FROM = {
			country_event = 50111
		}
		ai_chance = { factor = 90 }
	}
	option = {
		name = "Not a chance"
		prestige = 5
		FROM = {
			country_event = 50112
		}
		ai_chance = { factor = 10 }
	}
}

# Alliance with the Dunnish accepted
country_event = {
	id = 50111
	title = "Alliance accepted"
	desc = "The $FROMCOUNTRY$ has accepted our offer."
	picture = lord_of_isengard
	
	is_triggered_only = yes

	option = {
		name = "Great"
		prestige = 10
		create_vassal = FROM
		FROM = { government = tribal }
	}
}

# Alliance with the Dunnish Refused
country_event = {
	id = 50112
	title = "Alliance Refused"
	desc = "The $FROMCOUNTRY$ has rejected our offer."
	picture = lord_of_isengard
	
	is_triggered_only = yes

	option = {
		name = "How dare they?"
		FROM = {
			add_casus_belli = {
				target = ISE
				type = make_puppet
				months = 12
			}
		}
	}
}

# The Age of the Uruk Hai
country_event = {
	id = 50120
	title = "The Age of the Uruk Hai"
	desc = "EVTDESC50120"
	picture = lord_of_isengard

	trigger = {
		tag = ISE
		ruling_party = ISE_saruman
		good_evil_alignment = evil_alignment
		has_country_modifier = breeding_uruk_hai
		NOT = { has_global_flag = bred_uruk_hai }
	}
	
	mean_time_to_happen = { months = 24 }

	option = {
		name = "A new power is rising, it's victory is at hand."
		1055 = {
			any_pop = {
				move_pop = 811
			}
		}
		political_reform = yes_slavery
		any_owned = {
			limit = {
				is_core = THIS
			}
			any_pop = {
				limit = {
					culture = gondorian
				}
				militancy = 6
				consciousness = 6
				pop_type = slaves
			}
		}
		primary_culture = uruk_hai
		add_accepted_culture = dunnish
		remove_accepted_culture = gondorian
		remove_country_modifier = breeding_uruk_hai
		set_global_flag = bred_uruk_hai
		
		prestige = 5
		badboy = 3

		ai_chance = { factor = 100 }
	}
	option = {
		name = "On second thoughts, no."
		
		prestige = 5
		badboy = -5
		
		ai_chance = { factor = 0 }
	}
}

# Gaze in the Palantir - Start
country_event = {
	id = 50130
	title = "Gaze in to the Palantir"
	desc = "EVTDESC50130"
	picture = "palantir_saruman"

	trigger = {
		ruling_party = ISE_saruman
		has_country_modifier = orthanc_palantir
		MOR = {
			has_country_modifier = ithil_palantir
		}
		is_vassal = no
		war = no
		NOT = { good_evil_alignment = good_alignment }
		NOT = { has_country_flag = saruman_has_palantired_with_mordor}
	}

	mean_time_to_happen = { months = 6 }

	option = {
		name = "Cast your gaze..."
		country_event = {
			id = 50131
			days = 7
		}
		prestige = 5
		set_country_flag = saruman_has_palantired_with_mordor

		ai_chance = { factor = 100 }
	}

	option = {
		name = "It's too dangerous!"
		prestige = -5
		set_country_flag = saruman_has_palantired_with_mordor

		ai_chance = { factor = 0 }
	}
}

# Gaze in the Palantir - Offer Alliance
country_event = {
	id = 50131
	title = "Gaze in to the Palantir"
	desc = "EVTDESC50131"
	picture = "palantir_saruman"

	is_triggered_only = yes

	option = {
		name = "Yes, an alliance would suit our interests..."
		MOR = {
			country_event = {
				id = 50132
				days = 1
			}
		}
		prestige = 2
		ai_chance = { factor = 100 }
	}

	option = {
		name = "Resist"
		prestige = 1
		ai_chance = { factor = 0 }
	}
}

# Gaze in the Palantir - Mordor receives an alliance offer from Isengard
country_event = {
	id = 50132
	title = "An alliance with Isengard?"
	desc = "EVTDESC50132"
	picture = "palantir"

	is_triggered_only = yes

	option = {
		name = "All according to plan"
		FROM = {
			country_event = {
				id = 50133
				days = 1
			}
		}
		ai_chance = { factor = 100 }
	}

	option = {
		name = "No way"
		ai_chance = { factor = 0 }
	}
}

# Gaze in the Palantir - Alliance Accepted
country_event = {
	id = 50133
	title = "Alliance accepted"
	desc = "EVTDESC50133"
	picture = "palantir_saruman"

	is_triggered_only = yes

	option = {
		name = "Excellent"
		MOR = {
			relation = {
				who = THIS
				value = 200
			}
			create_alliance = THIS
			diplomatic_influence = {
				who = THIS
				value = 200
			}
		}
		ruling_party_ideology = servants
		prestige = 2
		ai_chance = { factor = 100 }
	}
}
