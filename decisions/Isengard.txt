# Remove this line to have the claim get that interior arguments are correct
# Audax Validator "!" Ignore_1009

# Isengard Decisions:
#	Starting Decision (Unseen)
#	The Search for Power
#	Aligning Dunland, Enedwaith and their neighbors
#	Uruk Hai

# Starting Decision
political_decisions = {
	# Audax Validator "." Ignore_1004
	isengard_start_decision = {
		potential = {
			tag = ISE
			always = no
		}
		effect = {
			# Set allowed leaders
			set_country_flag = ideologies_lords_of_isengard_active
			set_country_flag = nobility_deactivated
			
			set_country_flag = ISE_content
			
			set_country_flag = flavor_population_3
			set_country_flag = flavor_population_4
			set_country_flag = flavor_magic_3
			set_country_flag = flavor_diplomacy_2
			set_country_flag = flavor_expansion_2
			
			add_country_modifier = { name = saruman_modifier duration = -1 }
			add_country_modifier = { name = renounced_white_council duration = 7300 }
			1447 = { add_province_modifier = { name = pillar_white_hand duration = -1 } }
			
			set_variable = { which = ISE_surveillance value = 0 }
		}
	}
}

# The Search for Power
political_decisions = {
	ISE_great_power_combats_sauron = {
		picture = "Isengard/ISE_great_power"
		potential = {
			has_country_flag = ISE_content
			NOT = { has_country_modifier = ISE_has_great_power }
			ruling_party = ISE_saruman
		}
		allow = {
			OR = {
				military_score = 50
				industrial_score = 10
				prestige = 200
			}
		}
		effect = {
			add_country_modifier = { name = ISE_has_great_power duration = -1 }
		}
	}
	ISE_delve_into_ringmaking = {
		picture = "Isengard/ISE_ringmaking"
		potential = {
			has_country_flag = ISE_content
			NOT = { has_country_modifier = ISE_delving_into_ringmaking }
			NOT = { has_country_modifier = ISE_ring_of_saruman }
			ruling_party = ISE_saruman
		}
		allow = {
			magic_3 = 1
		}
		effect = {
			add_country_modifier = { name = ISE_delving_into_ringmaking duration = -1 }
			ISE_delving_into_ringmaking_loc = { }
		}
	}
}

# Aligning Dunland, Enedwaith and their neighbors
political_decisions = {
	ISE_expand_into_dunland_enedwaith = {
		picture = "Isengard/ISE_disunited_clans"
		potential = {
			has_country_flag = ISE_content
			is_vassal = no
			ruling_party = ISE_saruman
			FOR = {
				any_neighbor_country = {
					OR = {
						primary_culture = dunnish
						primary_culture = enedwaithrim
					}
					is_vassal = no
					OR = {
						neighbour = THIS
						any_neighbor_country = { vassal_of = THIS }
					}
					NOT = { tag = THIS }
				}
			}
		}
		allow = {
			diplomacy_2 = 1
			expansion_2 = 1
			war = no
			NOT = { has_country_modifier = ISE_dunland_enedwaith_cooldown }
		}
		effect = {
			random_country = {
				limit = {
					OR = {
						primary_culture = dunnish
						primary_culture = enedwaithrim
					}
					is_vassal = no
					OR = {
						neighbour = THIS
						any_neighbor_country = { vassal_of = THIS }
					}
				}
				country_event = 50110
			}
			
			set_country_flag = hidden_effects
			
			random_owned = {
				limit = { owner = { has_country_flag = hidden_effects } }
				owner = {
					add_country_modifier = { name = ISE_dunland_enedwaith_cooldown duration = 730 }
					clr_country_flag = hidden_effects
				}
			}
			
			set_country_flag = ISE_expanding_into_dunland_enedwaith
			
			ISE_expanding_into_dunland_enedwaith_loc = { }
		}
	}
	
	ISE_unite_dunland = {
		picture = "Isengard/ISE_unite_dunland"
		potential = {
			has_country_flag = ISE_content
			ruling_party = ISE_saruman
			has_country_flag = ISE_expanding_into_dunland_enedwaith
			NOT = { has_country_flag = ISE_united_dunland }
		}
		allow = {
			population_3 = 1
			war = no
			DUN = {
				all_core = {
					OR = {
						owned_by = THIS
						owner = { vassal_of = THIS }
					}
				}
			}
			ENE = {
				all_core = {
					OR = {
						owned_by = THIS
						owner = { vassal_of = THIS }
					}
				}
			}
		}
		effect = {
			any_country = {
				limit = {
					vassal_of = THIS
					primary_culture = dunnish
				}
				annex_to = THIS
			}
			
			DUN = {
				all_core = {
					limit = {
						owned_by = THIS
						NOT = { is_core = THIS }
					}
					add_province_modifier = { name = cultural_core_integration duration = -1 } # Average of 5 years to get a core per province
					any_pop = { ideology = { factor = 0.05 value = lords_of_isengard } }
				}
			}
			
			random_owned = {
				limit = { owner = { has_country_flag = ISE_turned_enedwaith } }
				owner = {
					any_country = {
						limit = {
							vassal_of = THIS
							primary_culture = enedwaithrim
						}
						annex_to = THIS
					}
					
					ENE = {
						all_core = {
							limit = {
								owned_by = THIS
								NOT = { is_core = THIS }
							}
							add_province_modifier = { name = cultural_core_integration duration = -1 } # Average of 5 years to get a core per province
							any_pop = { ideology = { factor = 0.05 value = lords_of_isengard } }
						}
					}
				}
			}
			
			set_country_flag = ISE_united_dunland
			
			ISE_uniting_dunland_loc = { }
		}
	}
	
	ISE_turn_the_enedwaithrim = {
		picture = "Isengard/ISE_unite_enedwaith"
		potential = {
			has_country_flag = ISE_content
			ruling_party = ISE_saruman
			has_country_flag = ISE_expanding_into_dunland_enedwaith
			NOT = { has_country_flag = ISE_turned_enedwaith }
		}
		allow = {
			population_4 = 1
			war = no
			ENE = {
				all_core = {
					OR = {
						owned_by = THIS
						owner = { vassal_of = THIS }
					}
				}
			}
		}
		effect = {
			add_accepted_culture = enedwaithrim
			
			random_owned = {
				limit = { owner = { has_country_flag = ISE_united_dunland } }
				owner = {
					any_country = {
						limit = {
							vassal_of = THIS
							primary_culture = enedwaithrim
						}
						annex_to = THIS
					}
					
					ENE = {
						all_core = {
							limit = {
								owned_by = THIS
								NOT = { is_core = THIS }
							}
							add_province_modifier = { name = cultural_core_integration duration = -1 } # Average of 5 years to get a core per province
							any_pop = { ideology = { factor = 0.05 value = lords_of_isengard } }
						}
					}
				}
			}
			
			set_country_flag = ISE_turned_enedwaith
			
			ISE_uniting_enedwaith_loc = { }
		}
	}
}

# Uruk Hai
political_decisions = {
	breed_uruk_hai = {
		potential = {
			tag = ISE
			is_vassal = no
			ruling_party = ISE_saruman
			NOT = { has_country_modifier = breeding_uruk_hai }
			NOT = { has_global_flag = bred_uruk_hai }
		}
		allow = {
			magic_3 = 1
			good_evil_alignment = evil_alignment
			war = no
		}
		effect = {
			prestige = 5
			badboy = 3
			add_country_modifier = {
				name = breeding_uruk_hai
				duration = -1
			}
			any_pop = { dominant_issue = { value = evil_alignment factor = 0.4 } }
		}
	}
}
